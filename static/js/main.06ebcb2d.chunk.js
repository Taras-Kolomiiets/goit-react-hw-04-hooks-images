(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],[,,,function(e,t,a){e.exports={Searchbar:"SearchBar_Searchbar__L0aSe",SearchForm:"SearchBar_SearchForm__2_pK-",SearchFormButton:"SearchBar_SearchFormButton__3yDkU",SearchFormButtonLabel:"SearchBar_SearchFormButtonLabel__22RCf",SearchFormInput:"SearchBar_SearchFormInput__2Dl-4"}},,,,,,,function(e,t,a){e.exports={ImageGalleryItem:"imageGalleryItem_ImageGalleryItem__1DGxi",ImageGalleryItemImage:"imageGalleryItem_ImageGalleryItemImage__1a2HM"}},function(e,t,a){e.exports={Overlay:"modal_Overlay__netCd",Modal:"modal_Modal__3sq3B"}},,,function(e,t,a){e.exports={ImageGallery:"imageGallery_ImageGallery__3hUtU"}},function(e,t,a){e.exports={Button:"button_Button__2BcwN"}},,,,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(5),o=a.n(c),s=(a(20),a(9)),i=a.n(s),l=a(12),u=a(13),m=a(2),h=(a(22),a(3)),j=a.n(h),d=a(0),b=function(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(m.a)(a,2),c=r[0],o=r[1];return Object(d.jsx)("header",{className:j.a.Searchbar,children:Object(d.jsxs)("form",{className:j.a.SearchForm,onSubmit:function(e){e.preventDefault(),t(c),o("")},children:[Object(d.jsx)("button",{type:"submit",className:j.a.SearchFormButton,children:Object(d.jsx)("span",{className:j.a.SearchFormButtonLabel,children:"Search"})}),Object(d.jsx)("input",{className:j.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:c,onChange:function(e){o(e.currentTarget.value)}})]})})},f=a(14),g=a.n(f),O=a(10),p=a.n(O),S=function(e){var t=e.image,a=e.showModal;return Object(d.jsx)("li",{className:p.a.ImageGalleryItem,onClick:a,children:Object(d.jsx)("img",{src:t.webformatURL,alt:t.tags,className:p.a.ImageGalleryItemImage})})},_=a(11),x=a.n(_),v=function(e){var t=e.children,a=e.onClose,r=document.querySelector("#modal-root");Object(n.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}}));var o=function(e){"Escape"===e.code&&a()};return Object(c.createPortal)(Object(d.jsx)("div",{className:x.a.Overlay,onClick:function(e){e.currentTarget===e.target&&a()},children:Object(d.jsx)("div",{className:x.a.Modal,children:t})}),r)},y=function(e){var t=e.images,a=Object(n.useState)(!1),r=Object(m.a)(a,2),c=r[0],o=r[1],s=Object(n.useState)(null),i=Object(m.a)(s,2),l=i[0],u=i[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("ul",{className:g.a.ImageGallery,children:t.map((function(e,t){return Object(d.jsx)(S,{image:e,showModal:function(){u(t),o(!0)}},e.id)}))}),c&&Object(d.jsx)(v,{onClose:function(){o(!c)},children:Object(d.jsx)("img",{src:t[l].largeImageURL,alt:t[l].tags})})]})},I=a(15),w=a.n(I),B=function(e){var t=e.onLoadMore;return Object(d.jsx)("button",{className:w.a.Button,onClick:t,children:"Load more"})},k="23130467-42c8d5c93f822886ee9232870",F="https://pixabay.com/api",L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return fetch("".concat(F,"/?q=").concat(e,"&page=").concat(t,"&key=").concat(k,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u041d\u0435\u0442 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(e)))})).then((function(e){return e.hits}))},N=a(7),G=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(1),o=Object(m.a)(c,2),s=o[0],h=o[1],j=Object(n.useState)([]),f=Object(m.a)(j,2),g=f[0],O=f[1],p=Object(n.useState)("idle"),S=Object(m.a)(p,2),_=S[0],x=S[1],v=Object(n.useState)(""),I=Object(m.a)(v,2),w=I[0],k=I[1];Object(n.useEffect)((function(){a&&("idle"===_&&(x("pending"),function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(a,s);case 3:if((t=e.sent).length){e.next=6;break}throw new Error("No search results for ".concat(a));case 6:O((function(e){return[].concat(Object(l.a)(e),Object(l.a)(t))})),x("resolved"),N.Loading.remove(),s>1&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),k(e.t0),x("rejected"),N.Loading.remove();case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}()()))}),[g,a,s,_]);return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(b,{onSubmit:function(e){r(e),h(1),O([]),x("idle")}}),"rejected"===_&&Object(d.jsx)("h1",{children:w.message}),Object(d.jsx)(y,{images:g}),"pending"===_&&N.Loading.dots(),"resolved"===_&&g.length>=12&&Object(d.jsx)(B,{onLoadMore:function(){h((function(e){return e+1})),x("idle")}})]})};o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(G,{})}),document.getElementById("root"))}],[[25,1,2]]]);
//# sourceMappingURL=main.06ebcb2d.chunk.js.map